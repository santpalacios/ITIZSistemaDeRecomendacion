<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> <!-- Incluir jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script> <!-- Incluir Popper.js -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> <!-- Incluir Bootstrap JavaScript -->
  <title>Formulario de Recomendación</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
      <img src="image/logo-removebg-preview.png" alt="logo" class="img-fluid" width="100px" height="100px">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link active" href="index.html">ITIZ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#oferta">OFERTA ACADEMICA</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="formulario.html">FORMULARIO</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container" style="margin-top: 3rem">
    <h1 style="color: rgb(236, 236, 240)">FORMULARIO DE RECOMENDACION DE CARRERA</h1>
    <div class="dropdown-divider"></div>
    <form id="interestsForm" style="text-transform: uppercase;">
      <!-- Preguntas para recomendar una carrera -->
      <h3>1. ¿Cuál de las siguientes actividades te interesa más?</h3>
      <label><input type="radio" name="areaInteres" value="1"> A) Tecnología y desarrollo de software</label><br>
      <label><input type="radio" name="areaInteres" value="2"> B) Administración y gestión empresarial</label><br>
      <label><input type="radio" name="areaInteres" value="3"> C) Innovación tecnológica</label><br>
      <label><input type="radio" name="areaInteres" value="4"> D) Gestión y organización de recursos</label><br>

      <h3>2. ¿Qué tan cómodo/a te sientes trabajando con matemáticas y ciencias físicas?</h3>
      <label><input type="radio" name="matematicas" value="1"> A) Muy cómodo/a</label><br>
      <label><input type="radio" name="matematicas" value="2"> B) Algo cómodo/a</label><br>
      <label><input type="radio" name="matematicas" value="3"> C) Indiferente</label><br>
      <label><input type="radio" name="matematicas" value="4"> D) Prefiero evitarlo</label><br>

      <h3>3. ¿Te gustaría trabajar en un entorno donde puedas liderar equipos o proyectos?</h3>
      <label><input type="radio" name="liderazgo" value="1"> A) Sí, me encanta la idea de liderar equipos</label><br>
      <label><input type="radio" name="liderazgo" value="2"> B) Sí, pero prefiero coordinar y organizar sin liderar directamente</label><br>
      <label><input type="radio" name="liderazgo" value="3"> C) Prefiero trabajar individualmente</label><br>
      <label><input type="radio" name="liderazgo" value="4"> D) No estoy seguro/a</label><br>

      <h3>4. ¿Qué prefieres hacer al resolver problemas?</h3>
      <label><input type="radio" name="resolucionProblemas" value="1"> A) Utilizar razonamiento lógico y matemático</label><br>
      <label><input type="radio" name="resolucionProblemas" value="2"> B) Planificar estrategias y coordinar tareas</label><br>
      <label><input type="radio" name="resolucionProblemas" value="3"> C) Investigar e innovar con nuevas tecnologías</label><br>
      <label><input type="radio" name="resolucionProblemas" value="4"> D) Organizar los recursos de manera efectiva</label><br>

      <h3>5. ¿Qué tan interesado/a estás en el uso de tecnologías avanzadas para mejorar sistemas?</h3>
      <label><input type="radio" name="tecnologiaAvanzada" value="1"> A) Muy interesado/a</label><br>
      <label><input type="radio" name="tecnologiaAvanzada" value="2"> B) Algo interesado/a</label><br>
      <label><input type="radio" name="tecnologiaAvanzada" value="3"> C) Solo si es necesario</label><br>
      <label><input type="radio" name="tecnologiaAvanzada" value="4"> D) No me interesa mucho</label><br>

      <h3>6. ¿Qué actividad deportiva prefieres?</h3>
      <label><input type="radio" name="deporte" value="1"> A) Básquetbol</label><br>
      <label><input type="radio" name="deporte" value="2"> B) Voleibol</label><br>
      <label><input type="radio" name="deporte" value="3"> C) Fútbol</label><br>
      <label><input type="radio" name="deporte" value="4"> D) Boxeo</label><br>

      <h3>7. ¿Qué actividad cultural o artística te atrae más?</h3>
      <label><input type="radio" name="actividadCultural" value="1"> A) Danza o teatro</label><br>
      <label><input type="radio" name="actividadCultural" value="2"> B) Banda de guerra o escolta</label><br>
      <label><input type="radio" name="actividadCultural" value="3"> C) Música, como banda versátil o estudiantina</label><br>
      <label><input type="radio" name="actividadCultural" value="4"> D) Club de lectura o ajedrez</label><br>

      <h3>8. ¿Te gustaría participar en actividades de estrategia o intelectuales?</h3>
      <label><input type="radio" name="estrategia" value="1"> A) Sí, en actividades como ajedrez</label><br>
      <label><input type="radio" name="estrategia" value="2"> B) Sí, en algo como un club de lectura</label><br>
      <label><input type="radio" name="estrategia" value="3"> C) Prefiero actividades físicas o deportivas</label><br>
      <label><input type="radio" name="estrategia" value="4"> D) No estoy seguro/a</label><br>

      <button type="submit" class="btn btn-primary">Ver Resultados</button>
    </form>
  </div>

  <!-- Modal de recomendaciones -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">Recomendaciones</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="recomendacionesBody">
          <!-- Aquí se mostrarán las recomendaciones -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    document.getElementById('interestsForm').addEventListener('submit', function(event) {
      event.preventDefault();

      const areaInteresElem = document.querySelector('input[name="areaInteres"]:checked');
      const matematicasElem = document.querySelector('input[name="matematicas"]:checked');
      const liderazgoElem = document.querySelector('input[name="liderazgo"]:checked');
      const resolucionProblemasElem = document.querySelector('input[name="resolucionProblemas"]:checked');
      const tecnologiaAvanzadaElem = document.querySelector('input[name="tecnologiaAvanzada"]:checked');
      const deporteElem = document.querySelector('input[name="deporte"]:checked');
      const actividadCulturalElem = document.querySelector('input[name="actividadCultural"]:checked');
      const estrategiaElem = document.querySelector('input[name="estrategia"]:checked');

      if (
        !areaInteresElem ||
        !matematicasElem ||
        !liderazgoElem ||
        !resolucionProblemasElem ||
        !tecnologiaAvanzadaElem ||
        !deporteElem ||
        !actividadCulturalElem ||
        !estrategiaElem
      ) {
        alert('Por favor, responde todas las preguntas.');
        return;
      }

      const areaInteres = parseInt(areaInteresElem.value);
      const matematicas = parseInt(matematicasElem.value);
      const liderazgo = parseInt(liderazgoElem.value);
      const resolucionProblemas = parseInt(resolucionProblemasElem.value);
      const tecnologiaAvanzada = parseInt(tecnologiaAvanzadaElem.value);
      const deporte = parseInt(deporteElem.value);
      const actividadCultural = parseInt(actividadCulturalElem.value);
      const estrategia = parseInt(estrategiaElem.value);

      const userResponse = {
        areaInteres,
        matematicas,
        liderazgo,
        resolucionProblemas,
        tecnologiaAvanzada,
        deporte,
        actividadCultural,
        estrategia
      };

      fetch('/predict', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(userResponse) 
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(err => { throw new Error(err.error || 'Error en la respuesta del servidor'); });
        }
        return response.json();
      })
      .then(result => {
        document.getElementById('recomendacionesBody').innerText = result.recomendaciones;
        $('#exampleModalCenter').modal('show'); 
      })
      .catch(error => {
        console.error('Error:', error);
        alert('Ocurrió un error al obtener las recomendaciones.');
      });
    });
  </script>
</body>
</html>